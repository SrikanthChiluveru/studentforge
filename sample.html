<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Courses Payment</title>
  <script src="https://cdn.tailwindcss.com"></script>
<style>
  body { font-family: Arial,sans-serif; background:#f5f5f5; margin:0; }
  .card { background:#fff; padding:20px; border-radius:12px; box-shadow:0 4px 15px rgba(0,0,0,0.1); display:flex; flex-direction:column; transition:transform 0.3s,box-shadow 0.3s; }
  .card:hover { transform:translateY(-5px); box-shadow:0 8px 20px rgba(0,0,0,0.15); }
  .card-buttons { display:flex; gap:10px; margin-top:auto; }
  .card button { flex:1; padding:10px 0; border:none; border-radius:6px; cursor:pointer; font-weight:bold; }
  .view-details { background:#0d2c6b;color:white; }
  .view-details:hover { background:#071746; }
  .enroll-btn { background:#28a745;color:white; }
  .enroll-btn:hover { background:#1e7e34; }

  #payment-overlay { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); justify-content:center; align-items:center; z-index:1000; }
  #payment-overlay .overlay-card { background:#fff; padding:25px; border-radius:12px; width:350px; max-width:90%; text-align:center; position:relative; }
  #payment-overlay .overlay-card h3 { margin-bottom:10px; color:#0d2c6b; }
  #payment-overlay .overlay-card p { margin-bottom:10px; color:#555; }
  #payment-overlay .overlay-card .overlay-pay-btn { background:#28a745;color:white;padding:10px 20px;border:none;border-radius:6px;cursor:pointer;font-weight:bold; }
  #payment-overlay .overlay-card .overlay-pay-btn:hover { background:#1e7e34; }
  #payment-overlay .overlay-card .close-overlay { position:absolute; top:10px; right:10px; cursor:pointer; font-size:18px; font-weight:bold; }
</style>
</head>
<body>
  <nav id="nav-placeholder"></nav>
<div style="max-width:1000px;margin:30px auto 10px auto;"><h2 style="font-size:24px;margin-bottom:15px;">Our Programs</h2></div>

<div id="courses" style="max-width:1000px;margin:20px auto; display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:20px;"></div>
<div style="text-align:center; margin:30px;">
  <button id="globalPayBtn"
          class="bg-green-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-green-700 transition">
    Enroll & Pay
  </button>
</div>
<div id="payment-overlay">
  <div class="overlay-card">
    <span class="close-overlay">&times;</span>
    <h3 id="overlay-course-name"></h3>
    <div id="overlay-details" style="text-align:left; margin:15px 0; font-size:14px; color:#444;"></div>
    <p><strong>Price: ₹<span id="overlay-course-price"></span></strong></p>
    <button id="overlay-pay-btn" class="overlay-pay-btn">Pay Now</button>
  </div>
</div>
<div id="footer-placeholder"></div>
<script>
// async function loadCourses() {
//   const res = await fetch("courses.json"); 
//   const courses = await res.json();
//   const container = document.getElementById("courses");

//   courses.forEach(course=>{
//     const card = document.createElement("div");
//     card.className = "card";
//     // store all fields as dataset for easy access
//     Object.keys(course).forEach(key=>{
//       card.dataset[key] = course[key];
//     });

//     card.innerHTML = `
//       <div style="margin-bottom:15px;">
//         <strong style="font-size:16px; color:#0d2c6b;">${course.name}</strong>
//         <p style="font-size:14px; color:#555;">${course.desc}</p>
//         <p style="font-size:13px; color:#888;">${course.extra}</p>
//       </div>
//       <div class="card-buttons">
//         <button class="view-details">View Details</button>
//       </div>
//     `;
//     container.appendChild(card);
//   });

//   attachOverlayEvents();
// }

// function attachOverlayEvents() {
//   const paymentOverlay = document.getElementById('payment-overlay');
//   const overlayName = document.getElementById('overlay-course-name');
//   const overlayDetails = document.getElementById('overlay-details');
//   const overlayPrice = document.getElementById('overlay-course-price');
//   const overlayPayBtn = document.getElementById('overlay-pay-btn');
//   const closeOverlay = document.querySelector('.close-overlay');
//   let selectedCourse = {};

//   // Close overlay
//   closeOverlay.onclick = ()=> paymentOverlay.style.display='none';
//   paymentOverlay.onclick = e=>{ if(e.target===paymentOverlay) paymentOverlay.style.display='none'; };

//   // Show details (generic function)
//   function showOverlay(course, showPayBtn) {
//     overlayName.textContent = course.name;
//     overlayPrice.textContent = course.price;

//     // Build details dynamically (skip name & price because already shown)
//     let detailsHtml = "";
//     for (let key in course) {
//       if (["name","price"].includes(key)) continue;
//       detailsHtml += `<p><strong>${key[0].toUpperCase()+key.slice(1)}:</strong> ${course[key]}</p>`;
//     }
//     overlayDetails.innerHTML = detailsHtml;

//     // Pay button visibility
//     overlayPayBtn.style.display = showPayBtn ? "inline-block" : "none";

//     paymentOverlay.style.display='flex';
//   }

//   // View Details
//   document.querySelectorAll('.view-details').forEach(btn=>{
//     btn.addEventListener('click', e=>{
//       const card = e.target.closest('.card');
//       const course = {...card.dataset};
//       course.price = parseInt(course.price);
//       showOverlay(course, false); // no Pay button
//     });
//   });

//   // Enroll (Pay)
//   document.querySelectorAll('.enroll-btn').forEach(btn=>{
//     btn.addEventListener('click', e=>{
//       const card = e.target.closest('.card');
//       const course = {...card.dataset};
//       course.price = parseInt(course.price);
//       showOverlay(course, true); // with Pay button

//       overlayPayBtn.onclick = () => {
//         const params = new URLSearchParams(course).toString();
//         window.location.href = `applynow.html?${params}`;
//       };
//     });
//   });
// }

// loadCourses();

async function loadCourses() {
  const res = await fetch("courses.json"); 
  const courses = await res.json();
  const container = document.getElementById("courses");

  courses.forEach(course => {
    const card = document.createElement("div");
    card.className = "card";

    card.innerHTML = `
      <div style="margin-bottom:15px;">
        <strong style="font-size:16px; color:#0d2c6b;">${course.name}</strong>
        <p style="font-size:14px; color:#555;">${course.desc}</p>
        <p style="font-size:13px; color:#888;">${course.extra}</p>
        <p class="text-sm text-gray-600 mt-1"><strong>Price:</strong> ₹${course.price}</p>
      </div>
    `;
    container.appendChild(card);
  });
}

// Global Pay Button → go to applynow.html
document.addEventListener("DOMContentLoaded", () => {
  document.getElementById("globalPayBtn").onclick = () => {
    window.location.href = "applynow.html";
  };
});

loadCourses();

//////////////////
function loadHTML(selector, file) {
            fetch(file)
                .then(response => {
                    if (!response.ok) throw new Error(`Could not fetch ${file}`);
                    return response.text();
                })
                .then(data => {
                    document.querySelector(selector).innerHTML = data;

                    // Re-run nav JS after loading nav dynamically
                    if (selector === "#nav-placeholder") {
                        const hamburger = document.getElementById('hamburger-menu');
                        const mobileNav = document.getElementById('mobile-nav');
                        if(hamburger && mobileNav) {
                            hamburger.addEventListener('click', () => mobileNav.classList.toggle('open'));
                            document.addEventListener('click', e => {
                                if (!mobileNav.contains(e.target) && !hamburger.contains(e.target)) {
                                    mobileNav.classList.remove('open');
                                }
                            });
                        }

                        // Highlight active link
                        var links = document.querySelectorAll('.nav-zoom');
                        var current = window.location.pathname.split('/').pop();
                        links.forEach(link => {
                            if(link.getAttribute('href') === current) link.classList.add('active');
                        });
                    }
                })
                .catch(err => console.error(err));
        }

        // Load nav and footer
        loadHTML("#nav-placeholder", "nav.html");
        loadHTML("#footer-placeholder", "footer.html");

</script>


</body>
</html>
